# 2.2 نوڈس اور کمیونیکیشن (Nodes and Communication)

## سیکھنے کے مقاصد (Learning Objectives)

اس سیکشن کے اختتام تک، آپ اس قابل ہو جائیں گے کہ:
- Python میں ROS 2 نوڈس بنا سکیں اور ان کا انتظام کر سکیں
- ٹاپک پر مبنی مواصلات کے لیے پبلشرز (Publishers) اور سبسکرائبرز (Subscribers) لاگو کر سکیں
- درخواست-جواب (Request-Reply) والے تعاملات کے لیے سروسز کا استعمال کر سکیں
- فیڈ بیک کے ساتھ طویل کاموں کے لیے ایکشنز (Actions) کا استعمال کر سکیں
- سمجھ سکیں کہ ٹاپکس، سروسز اور ایکشنز میں سے کب کس کا انتخاب کرنا ہے

---

## تعارف (Introduction)

**نوڈس (Nodes)** کسی بھی ROS 2 سسٹم کے بنیادی تعمیراتی بلاکس ہیں۔ ہر نوڈ ایک آزاد پراسیس ہے جو ایک مخصوص کام کا ذمہ دار ہوتا ہے — جیسے موٹر کو کنٹرول کرنا، سینسر ڈیٹا پروسیس کرنا، یا راستے کی منصوبہ بندی کرنا۔ یہ سیکشن آپ کو نوڈس بنانا اور ان کے درمیان مؤثر مواصلات سکھاتا ہے۔

---

## نوڈس کو سمجھنا (Understanding Nodes)

### نوڈ کیا ہے؟

ایک **نوڈ** ایک ایگزیکیوٹیبل پراسیس ہے جو کمپیوٹیشن کرتا ہے۔ ایک ہیومنائیڈ روبوٹ میں:
- **Perception Node**: کیمرہ/LiDAR ڈیٹا کو پروسیس کرتا ہے
- **Localization Node**: روبوٹ کی پوزیشن کا اندازہ لگاتا ہے
- **Planning Node**: نیویگیشن کے راستوں کا حساب لگاتا ہے
- **Control Node**: موٹرز کو کمانڈز بھیجتا ہے

**بنیادی اصول**: **ایک نوڈ، ایک مقصد**۔ نوڈس کو سادہ اور ماڈیولر رکھیں۔

---

## ٹاپکس: پبلش-سبسکرائب کمیونیکیشن

### ٹاپکس کب استعمال کریں؟

ٹاپکس کا استعمال ان چیزوں کے لیے کریں:
- ✅ مسلسل ڈیٹا اسٹریمز (سینسر ریڈنگز، روبوٹ پوز)
- ✅ ایک سے زیادہ (One-to-many) مواصلات
- ✅ غیر ہم آہنگ (Asynchronous) پیغامات

### پبلشر بنانا (Python)

```python
# یہ کوڈ ایک ٹاپک پر ویلوسٹی کمانڈز پبلش کرتا ہے
class VelocityPublisher(Node):
    def __init__(self):
        super().__init__('velocity_publisher')
        self.publisher = self.create_publisher(Twist, '/cmd_vel', 10)
        self.timer = self.create_timer(0.1, self.timer_callback)

    def timer_callback(self):
        msg = Twist()
        msg.linear.x = 0.5  # آگے بڑھنا
        self.publisher.publish(msg)
```

---

## سروسز: درخواست-جواب کمیونیکیشن (Request-Reply)

### سروسز کب استعمال کریں؟

سروسز کا استعمال ان چیزوں کے لیے کریں:
- ✅ ضرورت پڑنے پر حساب کتاب (مثلاً پاتھ پلاننگ)
- ✅ کنفیگریشن میں تبدیلیاں (پیرامیٹرز سیٹ کرنا)
- ✅ وہ تعاملات جہاں آپ کو فوری جواب کی ضرورت ہو

**ٹاپکس بمقابلہ سروسز**: ٹاپکس مسلسل ڈیٹا کے لیے ہیں، جبکہ سروسز صرف تب استعمال ہوتی ہیں جب کوئی خاص درخواست کی جائے۔

---

## ایکشنز (Actions): فیڈ بیک کے ساتھ طویل کام

### ایکشنز کب استعمال کریں؟

ایکشنز کا استعمال ان کاموں کے لیے کریں:
- ✅ وہ کام جن میں 1 سیکنڈ سے زیادہ وقت لگتا ہے (مثلاً نیویگیشن)
- ✅ جہاں کام کی پیشرفت (Progress) کا فیڈ بیک چاہیے ہو
- ✅ وہ کام جنہیں درمیان میں کینسل کیا جا سکے

**ایکشن کے تین حصے ہوتے ہیں**:
1. **Goal**: کیا حاصل کرنا ہے (مثلاً منزل کی پوزیشن)
2. **Feedback**: کام کے دوران اپ ڈیٹس (مثلاً منزل سے کتنا فاصلہ باقی ہے)
3. **Result**: حتمی نتیجہ (مثلاً کامیابی یا ناکامی)

---

## ٹاپکس بمقابلہ سروسز بمقابلہ ایکشنز

| خصوصیت | ٹاپکس | سروسز | ایکشنز |
|---------|--------|----------|---------|
| **پیٹرن** | پبلش-سبسکرائب | درخواست-جواب | گول-فیڈ بیک-نتیجہ |
| **ہم آہنگ؟ (Sync)** | نہیں | ہاں | نہیں (فیڈ بیک کے ساتھ) |
| **فیڈ بیک؟** | نہیں | نہیں | ہاں |
| **کینسل ہو سکتا ہے؟** | نہیں | نہیں | ہاں |
| **استعمال** | سینسر اسٹریمز | کنفیگریشن | نیویگیشن، پکڑنا |

---

## کلیدی نکات (Key Takeaways)

✅ **نوڈس** آزاد پراسیسز ہیں (ایک نوڈ، ایک مقصد)

✅ **ٹاپکس** مسلسل ڈیٹا (سینسر ڈیٹا) کے لیے ہیں

✅ **سروسز** فوری درخواست اور جواب کے لیے ہیں

✅ **ایکشنز** طویل کاموں (نیویگیشن) کے لیے ہیں جن میں فیڈ بیک کی ضرورت ہوتی ہے

---

**گزشتہ سیکشن**: [← 2.1 ROS 2 کا آرکیٹیکچر](./ros2-architecture.md)  
**اگلا سیکشن**: [2.3 ROS 2 پیکجز بنانا →](./building-packages.md)
